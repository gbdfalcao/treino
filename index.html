<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treino Pro - Ajustado</title>
    <style>
        :root {
            --bg-deep: #0a0e14;
            --accent-blue: #58a6ff;
            --timer-color: #3fb950;
            --text-main: #c9d1d9;
            --side-indicator: #f2a65a;
        }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg-deep);
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-align: center;
        }
        #container { width: 85%; max-width: 400px; z-index: 1; pointer-events: none; }
        h1 { font-size: 1.1rem; color: var(--accent-blue); text-transform: uppercase; letter-spacing: 2px; margin: 0; }
        #lado-info { font-size: 1.5rem; color: var(--side-indicator); font-weight: bold; height: 35px; margin-top: 10px; }
        #exercicio-nome { font-size: 2.2rem; font-weight: 800; margin: 10px 0; min-height: 90px; color: white; }
        #meta { font-size: 1.2rem; margin-bottom: 20px; opacity: 0.9; }
        #timer { font-size: 5.5rem; font-weight: 300; font-family: monospace; margin: 5px 0; color: var(--timer-color); }
        #progresso { font-size: 0.8rem; margin-top: 20px; opacity: 0.5; }
        
        /* Área invisível que detecta o toque */
        #camada-toque { 
            position: fixed; top: 0; left: 0; width: 100%; height: 80%; z-index: 5; 
        }
        
        #btn-voltar {
            position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%);
            background: #21262d; border: 1px solid #30363d; color: white;
            padding: 15px 40px; border-radius: 30px; font-size: 1rem; z-index: 10;
        }
        .instrucao { font-size: 0.9rem; color: var(--accent-blue); margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>

    <div id="camada-toque" onclick="gerenciarClique()"></div>

    <div id="container">
        <h1 id="status">Iniciar Treino</h1>
        <div id="lado-info"></div>
        <div id="exercicio-nome">Toque para começar</div>
        <div id="meta">---</div>
        <div id="timer">00:00</div>
        <div id="msg-instrucao" class="instrucao">Toque para iniciar</div>
        <div id="progresso">0 / 26</div>
    </div>

    <button id="btn-voltar" onclick="voltar()">← VOLTAR</button>

    <script>
        const listaExercicios = [
            { n: "Corrida estacionária", m: "Aquecimento", t: 60, duplo: false },
            { n: "Polichinelo", m: "200 repetições", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Isometria de quadríceps", m: "60 segundos", t: 60, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Prancha lateral", m: "2 minutos cada lado", t: 120, duplo: true },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Sugado (burpee)", m: "10 repetições", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Abdominal remada", m: "20 repetições", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Prancha lateral com abdominal", m: "30 reps cada lado", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Propriocepção", m: "60 segundos cada lado", t: 60, duplo: true },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Salto horizontal com flexão", m: "10 repetições", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Prancha frontal", m: "2 minutos", t: 120, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Extensão lombar (superman)", m: "20 repetições", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Afundo", m: "10 reps cada lado", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Flexão com elevação de pernas", m: "20 repetições", t: 0, duplo: false },
            { n: "Corrida estacionária", m: "Manter ritmo", t: 60, duplo: false },
            { n: "Aceleração máxima", m: "60 segundos", t: 60, duplo: false }
        ];

        let indice = -1;
        let tempoRestante = 0;
        let interval = null;
        let emExecucao = false;
        let ladoB = false;
        let aguardandoProximo = true;

        function gerenciarClique() {
            if (emExecucao) return; // Bloqueia clique se o tempo estiver rodando

            if (aguardandoProximo) {
                avancar();
            } else {
                iniciarTimer();
            }
        }

        function atualizarTela() {
            clearInterval(interval);
            interval = null;
            emExecucao = false;
            
            const ex = listaExercicios[indice];
            document.getElementById('exercicio-nome').innerText = ex.n;
            document.getElementById('meta').innerText = ex.m;
            document.getElementById('progresso').innerText = `${indice + 1} / ${listaExercicios.length}`;
            
            if (ex.duplo) {
                document.getElementById('lado-info').innerText = ladoB ? "LADO B (Direito)" : "LADO A (Esquerdo)";
            } else {
                document.getElementById('lado-info').innerText = "";
            }

            if (ex.t > 0) {
                tempoRestante = ex.t;
                atualizarRelogio(tempoRestante);
                document.getElementById('status').innerText = "PREPARAR";
                document.getElementById('msg-instrucao').innerText = "Toque para iniciar o tempo";
                aguardandoProximo = false;
            } else {
                document.getElementById('timer').innerText = "REPS";
                document.getElementById('status').innerText = "EXECUTE";
                document.getElementById('msg-instrucao').innerText = "Toque ao concluir";
                aguardandoProximo = true;
            }
        }

        function avancar() {
            if (indice < listaExercicios.length - 1) {
                indice++;
                ladoB = false;
                atualizarTela();
            } else {
                finalizar();
            }
        }

        function voltar() {
            clearInterval(interval);
            emExecucao = false;
            if (ladoB) {
                ladoB = false;
            } else if (indice > 0) {
                indice--;
                // Verifica se o anterior era duplo para voltar ao lado B dele
                ladoB = listaExercicios[indice].duplo;
            }
            atualizarTela();
        }

        function iniciarTimer() {
            if (emExecucao) return;
            emExecucao = true;
            document.getElementById('status').innerText = "TREINANDO";
            document.getElementById('msg-instrucao').innerText = "Aguarde o fim...";
            
            interval = setInterval(() => {
                tempoRestante--;
                if (tempoRestante <= 0) {
                    tempoRestante = 0;
                    finalizarPeriodo();
                }
                atualizarRelogio(tempoRestante);
            }, 1000);
        }

        function finalizarPeriodo() {
            clearInterval(interval);
            interval = null;
            emExecucao = false;
            beep();
            
            const ex = listaExercicios[indice];
            if (ex.duplo && !ladoB) {
                ladoB = true;
                aguardandoProximo = false; 
                document.getElementById('status').innerText = "TROQUE O LADO";
                document.getElementById('msg-instrucao').innerText = "Toque para o LADO B";
                document.getElementById('lado-info').innerText = "LADO B (Direito)";
                tempoRestante = ex.t;
                atualizarRelogio(tempoRestante);
            } else {
                aguardandoProximo = true;
                document.getElementById('status').innerText = "CONCLUÍDO";
                document.getElementById('msg-instrucao').innerText = "Toque para PRÓXIMO";
            }
        }

        function atualizarRelogio(seg) {
            const m = Math.floor(seg / 60);
            const s = seg % 60;
            document.getElementById('timer').innerText = `${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
        }

        function finalizar() {
            document.getElementById('exercicio-nome').innerText = "TREINO PAGO!";
            document.getElementById('lado-info').innerText = "";
            document.getElementById('meta').innerText = "Bom descanso!";
            document.getElementById('timer').innerText = "FIM";
            document.getElementById('status').innerText = "PARABÉNS";
            aguardandoProximo = true;
            indice = -1;
        }

        function beep() {
            try {
                const context = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = context.createOscillator();
                oscillator.connect(context.destination);
                oscillator.start();
                oscillator.stop(context.currentTime + 0.3);
            } catch(e) {}
        }
    </script>
</body>
</html>
